<%- include('../includes/header.ejs') %> <%- include('../includes/nav.ejs') %>

<div class="bg-primary" id="layoutAuthentication" style="padding-top:50px; padding-bottom:50px;">
  <div id="layoutAuthentication_content">
    <main>
      <div class="container">
        <div class="row justify-content-center">
          <div class="col-lg-7">
            <div class="card shadow-lg border-0 rounded-lg mt-5">
              <div class="card-header">
                <h3 class="text-center font-weight-light my-4">
                  ลงทะเบียนผู้ใช้งานใหม่
                </h3>
              </div>
              <div class="card-body">
                <form action="/register" method="POST">
                  <div class="form-row">
                    <div class="col-md-6">
                      <div class="form-group">
                        <label class="small mb-1" for="firstname">ชื่อ</label>
                        <input
                          type="text"
                          id="firstname"
                          name="firstname"
                          class="form-control py-4 <% if (errFields.errFirstName) { %>is-invalid<% } %>"
                          required="required"
                          value="<%= oldInput.firstname %>"
                          placeholder="ชื่อ <%= errFields.errFirstName %> "
                        />
                        <div class="invalid-feedback">
                          <%= errFields.errFirstName %>
                        </div>
                      </div>
                    </div>
                    <div class="col-md-6">
                      <div class="form-group">
                        <label class="small mb-1" for="lastname">นามสกุล</label>
                        <input
                          type="text"
                          id="lastname"
                          name="lastname"
                          class="form-control py-4 <% if (errFields.errLastName) { %>is-invalid<% } %>"
                          required="required"
                          value="<%= oldInput.lastname %>"
                          placeholder="นามสกุล"
                        />
                        <div class="invalid-feedback">
                          <%= errFields.errLastName %>
                        </div>
                      </div>
                    </div>
                  </div>
                  <div class="form-group">
                    <label class="small mb-1" for="email">อีเมลที่ติดต่อได้ (ใช้สำหรับเข้าสู่ระบบและรับการแจ้งเตือน) </label>
                    <input
                      type="email"
                      id="email"
                      name="email"
                      class="form-control py-4 <% if (errFields.errEmail) { %>is-invalid<% } %>"
                      required="required"
                      value="<%= oldInput.email %>"
                      aria-describedby="emailHelp"
                      placeholder="อีเมล"
                    />
                    <div class="invalid-feedback">
                      <%= errFields.errEmail %>
                    </div>
                  </div>
                  <div class="form-group">
                    <label class="small mb-1" for="username">ชื่อผู้ใช้ (หรือ รหัสนักศึกษา)</label>
                    <input
                      type="text"
                      id="username"
                      name="username"
                      class="form-control py-4 <% if (errFields.errUsername) { %>is-invalid<% } %>"
                      required="required"
                      value="<%= oldInput.username %>"
                      placeholder="ชื่อผู้ใช้ (หรือ รหัสนักศึกษา)"
                    />
                    <div class="invalid-feedback">
                      <%= errFields.errUsername %>
                    </div>
                  </div>

                  <div class="form-row">
                    <div class="col-md-6">
                      <div class="form-group">
                        <label class="small mb-1" for="password"
                          >รหัสผ่าน</label
                        >
                        <input
                          type="password"
                          id="password"
                          name="password"
                          class="form-control py-4 <% if (errFields.errPassword) { %>is-invalid<% } %>"
                          required="required"
                          placeholder="รหัสผ่าน"
                        />
                        <div class="invalid-feedback">
                          <%= errFields.errPassword %>
                        </div>
                      </div>
                    </div>
                    <div class="col-md-6">
                      <div class="form-group">
                        <label class="small mb-1" for="passwordConf"
                          >ยืนยันรหัสผ่าน</label
                        >
                        <input
                          type="password"
                          id="passwordConf"
                          name="passwordConf"
                          class="form-control py-4 <% if (errFields.errPasswordConf) { %>is-invalid<% } %>"
                          required="required"
                          placeholder="ยืนยันรหัสผ่าน"
                        />
                        <div class="invalid-feedback">
                          <%= errFields.errPasswordConf %>
                        </div>
                      </div>
                    </div>
                  </div>
                  <div class="form-group">
                    <label class="small mb-1" for="usertype">สถานะการเข้าร่วม</label>
                    <select name="usertype" id="usertype" class="form-control">
                      <option value="Student" class="form-control py-4"
                        >ผู้เรียน (นิสิต,นักศึกษา)</option
                      >
                      <option value="Teacher" class="form-control py-4"
                        >ผู้สอน (อาจารย์)</option
                      >
                    </select>
                    <div class="invalid-feedback">
                      <%= errFields.errUserType %>
                    </div>
                  </div>
                  <div class="form-group">
                    <label class="small mb-1" for="usertype"><input
                      type="checkbox"
                      id="consentConf"
                      name="consentConf"
                      class="<% if (errFields.errConsentConf) { %>is-invalid<% } %>"
                      required="required"
                    /> อนุญาติให้ประมวลผลข้อมูลตามกฏหมาย PDPA</label>
                    
                    <div class="invalid-feedback">
                      <%= errFields.errConsentConf %>
                    </div>
                  </div>
                  <input type="hidden" name="_csrf" value="<%= csrfToken %>" />
                  <input
                    type="submit"
                    class="form-group mt-4 mb-0 btn btn-primary btn-block"
                    value="ลงทะเบียน"
                  />
                </form>
              </div>
              <div class="card-footer text-center">
                <div class="small">
                  <a href="/login">เคยสมัครแล้ว? เข้าสู่ระบบ</a>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </main>
  </div>
</div>

<%- include('../includes/footer.ejs') %>
